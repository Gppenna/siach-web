<section class="d-flex flex-column mt-5">
	<div>
		<div>
			<div>
				<h1 tabindex="0">Cadastrar Solicitação de Aproveitamento</h1>
			</div>
			<nav aria-labelledby="accessibility-menu">
				<ul class="accessibility-header">
					<li>
						<a (click)="skipToInfo()" (keyup.enter)="skipToInfo()" (keydown.enter)="skipToInfo()" tabindex="0" aria-label="Pular para informações"
							>Pular para informações</a
						>
					</li>
					<li>
						<a
							(click)="skipToRascunhos()"
							(keyup.enter)="skipToRascunhos()"
							(keydown.enter)="skipToRascunhos()"
							tabindex="0"
							aria-label="Pular para rascunhos de aproveitamentos criados ou botão para adicionar aproveitamento"
							>Pular para rascunhos de aproveitamentos criados ou botão para adicionar aproveitamento</a
						>
					</li>
				</ul>
			</nav>
			<div id="info" #info tabindex="0" class="d-flex flex-column m-auto userCard-container py-5 mt-2">
				<div class="row userCard mb-4" *ngIf="userData">
					<div class="col d-flex flex-column gap-3 nunito">
						<div class="row" tabindex="0">
							<span class="col-3 strong">Nome:</span>
							<span class="col-6">{{ userData.nome }}</span>
						</div>
						<div class="row" tabindex="0">
							<span class="col-3 strong">Curso:</span>
							<span class="col-6">{{ userData.curso.descricao }}</span>
						</div>
					</div>
					<div class="col d-flex flex-column gap-3 nunito">
						<div class="row" tabindex="0">
							<span class="col-3 strong">Matrícula:</span>
							<span class="col-6">{{ userData.matricula }}</span>
						</div>
						<div class="row" tabindex="0">
							<span class="col-3 strong">E-mail:</span>
							<span class="col-6">{{ userData.email }}</span>
						</div>
					</div>
				</div>
				<span tabindex="0" class="highlight">Cadastre vários aproveitamentos de uma só vez!</span>
				<ul>
					<li tabindex="0"><span> Os aproveitamentos abaixo são rascunhos, você poderá edita-las antes de enviar</span></li>
					<li tabindex="0">
						<span> Para enviá-los para análise do colegiado clique no botão <span class="highlight">"Enviar Solicitação"</span> </span>
					</li>
					<li tabindex="0">
						<span class="mt-3"
							><span class="highlight">Caso saia desta página seus rascunhos ficam salvos</span>, você poderá visualizá-los novamente ao retornar
							:)</span
						>
					</li>
				</ul>
			</div>
			<div id="rascunhos" #rascunhos tabindex="0" class="d-flex justify-content-between gap-3 solicitacaoCard">
				<h2 style="font-weight: 500" tabindex="0">Aproveitamentos Pendentes de Envio - Rascunho</h2>
				<button tabindex="0" class="btn btn-new" style="width: 300px !important" (click)="novaDivulgacaoAtividade()">
					<mat-icon>add_circle</mat-icon><span>Adicionar Aproveitamento</span>
				</button>
			</div>

			<nav aria-labelledby="accessibility-menu">
				<ul class="accessibility-header">
					<li>
						<a
							(click)="skipToRascunhosCards()"
							(keyup.enter)="skipToRascunhosCards()"
							(keydown.enter)="skipToRascunhosCards()"
							tabindex="0"
							aria-label="Pular para rascunhos de aproveitamentos"
							>Pular para rascunhos de aproveitamentos</a
						>
					</li>
					<li>
						<a
							(click)="skipToEnviar()"
							(keyup.enter)="skipToEnviar()"
							(keydown.enter)="skipToEnviar()"
							tabindex="0"
							aria-label="Pular para botão de enviar solicitação para análise do colegiado"
							>Pular para botão de enviar solicitação para análise do colegiado</a
						>
					</li>
				</ul>
			</nav>

			<ng-template [ngIf]="dataSource.length > 0">
				<div id="rascunhosCards" #rascunhosCards tabindex="0" class="d-flex flex-wrap justify-content-between">
					<div
						(click)="editSolicitacao(atividade)"
						class="card-container my-4"
						style="width: 47%; position: relative"
						*ngFor="let atividade of dataSource"
					>
						<div tabindex="0" aria-labelledby="edit-label" (click)="editSolicitacao(atividade)" class="d-flex" style="padding: 1rem">
							<div style="padding: 1rem">
								<div class="px-2">
									<div class="d-flex mb-3 gap-2">
										<div>
											<mat-icon style="transform: scale(1.5); cursor: pointer; position: absolute; left: 9%" (click)="editSolicitacao(atividade)"
												>edit_note</mat-icon
											>
										</div>

										<span id="edit-label" class="accessibility-header">Editar solicitação</span>
										<h2 style="margin-left: 3rem; max-width: 70%">{{ atividade.titulo }}</h2>
										<div class="chip primary" style="position: absolute; left: 80%">{{ atividade.horas }} horas</div>
									</div>

									<h3>Grupo: {{ atividade.grupoBarema?.descricao }}</h3>
								</div>

								<mat-divider style="border-top-color: #000"></mat-divider>
								<div class="mt-3 d-flex gap-4">
									<h4>Atividade:</h4>
									<span style="font-size: 18px">
										{{ atividade.atividadeBarema?.descricao }}
									</span>
								</div>
							</div>
						</div>
					</div>
				</div>
			</ng-template>

			<ng-template [ngIf]="dataSource.length === 0">
				<div class="app-page-messages" style="padding-top: 15vh !important">
					<mat-icon>search_off</mat-icon>
					<h5 class="nunito">Você ainda não possui aproveitamentos criados!</h5>
				</div>
			</ng-template>
			<div class="d-flex justify-content-center mt-3">
				<button
					id="enviar"
					#enviar
					tabindex="0"
					class="btn btn-primary"
					style="font-size: 20px"
					[disabled]="dataSource.length === 0 || loading"
					color="primary"
					(click)="ativar()"
				>
					Enviar Solicitação
				</button>
				<ng-template [ngIf]="loading">
					<mat-spinner [diameter]="20" style="margin: auto 0px" class="ml-3"></mat-spinner>
				</ng-template>
			</div>
		</div>
	</div>
</section>
<div class="bottom"></div>
